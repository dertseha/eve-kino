define("util/GlHelper",["lib/gl-matrix"],function(t){var e=Math.PI/180,n={forward:1,upward:-1,rightward:-1},i={rollClockwise:1,pitchUp:-1,yawRight:-1},o={forward:1,upward:1,rightward:-1},r={rollClockwise:1,pitchUp:1,yawRight:-1};t.quat4.create();var a={VIEW_DIRECTION_FORWARD:n.forward,VIEW_DIRECTION_UP:n.upward,VIEW_DIRECTION_RIGHT:n.rightward,VIEW_ROTATION_ROLL_CLOCKWISE:i.rollClockwise,VIEW_ROTATION_PITCH_UP:i.pitchUp,VIEW_ROTATION_YAW_RIGHT:i.yawRight,VIEW_VECTOR_FORWARD:t.vec3.create([0,0,n.forward]),VIEW_VECTOR_UP:t.vec3.create([0,n.upward,0]),VIEW_VECTOR_RIGHT:t.vec3.create([n.rightward,0,0]),MODEL_DIRECTION_FORWARD:o.forward,MODEL_DIRECTION_UP:o.upward,MODEL_DIRECTION_RIGHT:o.rightward,MODEL_ROTATION_ROLL_CLOCKWISE:r.rollClockwise,MODEL_ROTATION_PITCH_UP:r.pitchUp,MODEL_ROTATION_YAW_RIGHT:r.yawRight,MODEL_VECTOR_FORWARD:t.vec3.create([0,0,o.forward]),MODEL_VECTOR_UP:t.vec3.create([0,o.upward,0]),MODEL_VECTOR_RIGHT:t.vec3.create([o.rightward,0,0]),degreeToRad:function(t){return t*e},rotateVectorByView:function(e,i,o,r,a){return e[0]=o*n.rightward,e[1]=r*n.upward,e[2]=a*n.forward,t.quat4.multiplyVec3(i,e)}};return a}),define("production/Animator",["lib/gl-matrix","util/GlHelper"],function(t,e){var n=t.quat4.create(),i=t.vec3.create(),o=function(i,o,r,a){t.quat4.fromAngleAxis(o*e.MODEL_ROTATION_ROLL_CLOCKWISE,e.MODEL_VECTOR_FORWARD,n),t.quat4.multiply(i,n,i),t.quat4.fromAngleAxis(r*e.MODEL_ROTATION_PITCH_UP,e.MODEL_VECTOR_RIGHT,n),t.quat4.multiply(i,n,i),t.quat4.fromAngleAxis(a*e.MODEL_ROTATION_YAW_RIGHT,e.MODEL_VECTOR_UP,n),t.quat4.multiply(i,n,i)},r=function(t,e){this.prop=t,this.script=e,this.commandChannel=null,this.lastState=null};return r.prototype.getScript=function(){return this.script},r.prototype.setCommandChannel=function(t){this.commandChannel=t},r.prototype.update=function(){var t=this.prop.getStateData(this.lastState),e=this.prop.getStateData(),n=this.script.getFrameData()||e;e=this.commandChannel?this.updateByCommands(e,t,n):n,this.prop.setStateData(e),this.script.setFrameData(e),this.lastState=t},r.prototype.updateByCommands=function(n){var r=this.commandChannel.getCommands(),a=.02*(r.rollClockwise-r.rollCounter),s=.02*(r.pitchUp-r.pitchDown),c=.02*(r.yawRight-r.yawLeft),p=r.moveUp-r.moveDown,u=r.moveRight-r.moveLeft,d=r.moveForward-r.moveBackward;return o(n.rotation,a,s,c),i[0]=u*e.MODEL_DIRECTION_RIGHT,i[1]=p*e.MODEL_DIRECTION_UP,i[2]=d*e.MODEL_DIRECTION_FORWARD,t.quat4.multiplyVec3(n.rotation,i),n.position[0]+=i[0],n.position[1]+=i[1],n.position[2]+=i[2],n},r}),define("production/StageManager",["production/Animator"],function(t){var e=function(t){this.stage=t,this.animators=[]};return e.prototype.updateStage=function(){this.animators.forEach(function(t){t.update()})},e.prototype.getAnimator=function(e,n){var i=new t(e,n);return this.animators.push(i),i},e}),define("production/Camera",[],function(){var t={getCameraStateData:function(t){return t}},e=function(e){this.sceneCamera=e,this.operator=t,this.lastState=null};return e.getNullOperator=function(){return Object.create(t)},e.prototype.setOperator=function(e){this.operator=e||t},e.prototype.updateFrame=function(){var t=this.sceneCamera,e=t.getStateData(this.lastState),n=this.operator.getCameraStateData(t.getStateData(),e);t.setStateData(n),this.lastState=e},e}),define("controls/CommandChannel",[],function(){var t=function(t,e,n,i){this.owner=t,this.id=e,this.type=n,this.actions=i,this.resetCommands()};return t.prototype.resetCommands=function(){var t=this;this.commands={},this.actions.forEach(function(e){t.commands[e]=0})},t.prototype.close=function(){this.owner.removeCommandChannel(this.id)},t.prototype.hasAction=function(t){return this.actions.indexOf(t)>=0},t.prototype.setCommandIntensity=function(t,e){this.commands[t]=e},t.prototype.getCommands=function(){return this.commands},t}),define("controls/InputChannel",[],function(){var t=function(t,e,n){this.owner=t,this.id=e,this.type=n};return t.prototype.close=function(){this.owner.removeInputChannel(this.id)},t.prototype.setIntensity=function(t,e){this.owner.setInputIntensity(this.type,t,e)},t}),define("production/Director",["controls/CommandChannel","controls/InputChannel"],function(t,e){var n=function(){this.bindings={},this.commandChannels={},this.inputChannels={},this.idCounter=0};return n.prototype.getNextId=function(){return""+this.idCounter++},n.prototype.getInputChannel=function(t){var n=this.getNextId(),i=new e(this,n,t);return this.inputChannels[n]=i,i},n.prototype.removeInputChannel=function(t){delete this.inputChannels[t]},n.prototype.getCommandChannel=function(e,n){var i=this.getNextId(),o=new t(this,i,e,n);return this.commandChannels[i]=o,o},n.prototype.removeCommandChannel=function(t){delete this.commandChannels[t]},n.prototype.getBindings=function(){return this.bindings},n.prototype.addBinding=function(t,e){this.bindings[t.actionName]=[e]},n.prototype.setInputIntensity=function(t,e,n){var i=this,o=function(t){var o=i.bindings[t];o&&o.forEach(function(o){e===o.inputName&&i.setActionIntensity(t,n)})};for(var r in this.bindings)o(r)},n.prototype.setActionIntensity=function(t,e){var n,i;for(n in this.commandChannels)i=this.commandChannels[n],i.hasAction(t)&&i.setCommandIntensity(t,e)},n}),define("production/CameraOperator",["lib/gl-matrix","util/GlHelper"],function(t,e){var n=["pitchUp","pitchDown","rollClockwise","rollCounter","yawRight","yawLeft","moveUp","moveDown","moveForward","moveBackward","moveRight","moveLeft"],i=t.quat4.create(),o=t.vec3.create(),r=function(n,o,r,a){t.quat4.fromAngleAxis(o*e.VIEW_ROTATION_ROLL_CLOCKWISE,e.VIEW_VECTOR_FORWARD,i),t.quat4.multiply(i,n,n),t.quat4.fromAngleAxis(r*e.VIEW_ROTATION_PITCH_UP,e.VIEW_VECTOR_RIGHT,i),t.quat4.multiply(i,n,n),t.quat4.fromAngleAxis(a*e.VIEW_ROTATION_YAW_RIGHT,e.VIEW_VECTOR_UP,i),t.quat4.multiply(i,n,n)},a=function(n,o,r,a){t.quat4.fromAngleAxis(-1*o,e.VIEW_VECTOR_FORWARD,i),t.quat4.multiply(n,i,n),t.quat4.fromAngleAxis(r,e.VIEW_VECTOR_RIGHT,i),t.quat4.multiply(n,i,n),t.quat4.fromAngleAxis(a,e.VIEW_VECTOR_UP,i),t.quat4.multiply(n,i,n)},s=function(t,e){this.commandChannel=t,this.shotList=e,this.manualMode=!0};return s.getActionNames=function(){return n.slice(0)},s.prototype.setManualMode=function(t){this.manualMode=t},s.prototype.getCameraStateData=function(t,e){var n=this.shotList.getFrameData()||t;return t=this.manualMode?this.getNewStateData(t,e,n):n,this.shotList.setFrameData(t),t},s.prototype.getNewStateData=function(n){var i=this.commandChannel.getCommands(),s=.02*(i.rollClockwise-i.rollCounter),c=.02*(i.pitchUp-i.pitchDown),p=.02*(i.yawRight-i.yawLeft),u=i.moveUp-i.moveDown,d=i.moveRight-i.moveLeft,h=i.moveForward-i.moveBackward;return r(n.rotation,s,c,p),a(n.modelRotation,s,c,p),o[0]=d*e.VIEW_DIRECTION_RIGHT,o[1]=u*e.VIEW_DIRECTION_UP,o[2]=h*e.VIEW_DIRECTION_FORWARD,t.quat4.multiplyVec3(n.modelRotation,o),n.position[0]+=o[0],n.position[1]+=o[1],n.position[2]+=o[2],n},s}),define("production/Resources",["production/StageManager","production/Camera","production/Director","production/CameraOperator"],function(t,e,n,i){var o={StageManager:t,Director:n,Camera:e,CameraOperator:i};return o}),define("controls/Gamepad",["lib/gamepad"],function(){var t=function(){this.listeners=[]};return t.prototype.getRuntimeId=function(){return this.runtimeId},t.prototype.addListener=function(t){this.listeners.push(t)},t.prototype.onDeviceDisconnected=function(){this.listeners.forEach(function(t){t.onGamepadDisconnected()})},t.prototype.onControlValueChanged=function(t,e){this.listeners.forEach(function(n){n.onControlValueChanged(t,e)})},t}),define("controls/GamepadApi",["lib/gamepad","controls/Gamepad"],function(t,e){var n=function(){this.lib=new t,this.gamepads={},this.idCounter=0,this.connectionListeners=[]};return n.prototype.init=function(){var e=this;return this.lib.bind(t.Event.CONNECTED,function(t){e.onDeviceConnected(t)}),this.lib.bind(t.Event.DISCONNECTED,function(t){e.onDeviceDisonnected(t)}),this.lib.bind(t.Event.BUTTON_DOWN,function(t){e.onControlValueChanged(t.gamepad.index,t.control,1)}),this.lib.bind(t.Event.BUTTON_UP,function(t){e.onControlValueChanged(t.gamepad.index,t.control,0)}),this.lib.bind(t.Event.AXIS_CHANGED,function(t){e.onAxisValueChanged(t.gamepad.index,t.axis,t.value)}),this.lib.init()},n.prototype.getGamepads=function(){var t,e=[];for(t in this.gamepads)e.push(this.gamepads[t]);return e},n.prototype.addGamepadListener=function(t){this.connectionListeners.push(t)},n.prototype.onDeviceConnected=function(t){var n=new e(this.idCounter++);this.gamepads[t.index]=n,this.connectionListeners.forEach(function(t){t.onGamepadConnected(n)})},n.prototype.onDeviceDisonnected=function(t){var e=this.gamepads[t.index];e&&(delete this.gamepads[t.index],e.onDeviceDisconnected(),this.connectionListeners.forEach(function(t){t.onGamepadDisconnected(e)}))},n.prototype.onControlValueChanged=function(t,e,n){var i=this.gamepads[t];i&&i.onControlValueChanged(e,n)},n.prototype.onAxisValueChanged=function(t,e,n){var i=this.gamepads[t];i&&(0>n?(i.onControlValueChanged(e+"_POS",0),i.onControlValueChanged(e+"_NEG",-n)):(i.onControlValueChanged(e+"_NEG",0),i.onControlValueChanged(e+"_POS",n)))},n}),define("production/ccp/res/Ship",["lib/gl-matrix"],function(t){var e=function(e,n){this.ccpwgl=e,this.obj=n,this.position=t.vec3.create(),this.rotation=t.quat4.identity(),this.transform=t.mat4.identity()};return e.prototype.getBoundingSphereRadius=function(){return this.obj.getBoundingSphere()[1]},e.prototype.getStateData=function(e){var n=e||{};return n.position=t.vec3.set(this.position,n.position||[0,0,0]),n.rotation=t.quat4.set(this.rotation,n.rotation||[0,0,0,1]),n},e.prototype.setStateData=function(e){t.vec3.set(e.position,this.position),t.quat4.set(e.rotation,this.rotation),t.mat4.fromRotationTranslation(this.rotation,this.position,this.transform),this.obj.setTransform(this.transform)},e}),define("production/ccp/res/ShipArchetype",["production/ccp/res/Ship"],function(t){var e=function(){this.resourceUrl=""};return e.prototype.request=function(e,n,i){return n.loadShip(this.resourceUrl,function(){i.resolve(new t(e,this))})},e.prototype.setResourceUrl=function(t){return this.resourceUrl=t,this},e}),define("production/ccp/res/Planet",["lib/gl-matrix"],function(t){var e=function(e){this.obj=e,this.position=t.vec3.create(),this.rotation=t.quat4.identity(),this.radius=1,this.transform=t.mat4.identity()};return e.prototype.getBoundingSphereRadius=function(){return this.radius},e.prototype.getStateData=function(e){var n=e||{};return n.position=t.vec3.set(this.position,n.position||[0,0,0]),n.rotation=t.quat4.set(this.rotation,n.rotation||[0,0,0,1]),n.radius=this.radius,n},e.prototype.setStateData=function(e){t.vec3.set(e.position,this.position),t.quat4.set(e.rotation,this.rotation),this.radius=e.radius,t.mat4.fromRotationTranslation(this.rotation,[0,0,0],this.transform),t.mat4.scale(this.transform,[this.radius/2,this.radius/2,this.radius/2]),this.transform[12]=this.position[0],this.transform[13]=this.position[1],this.transform[14]=this.position[2],this.obj.setTransform(this.transform)},e}),define("production/ccp/res/PlanetArchetype",["production/ccp/res/Planet"],function(t){var e=function(){this.resourceUrl="",this.itemId=0,this.atmosphereUrl=null,this.heightMap1Url=null,this.heightMap2Url=null};return e.prototype.request=function(e,n,i){var o=n.loadPlanet(this.itemId,this.resourceUrl,this.atmosphereUrl,this.heightMap1Url,this.heightMap2Url);i.resolve(new t(o))},e.prototype.setItemId=function(t){return this.itemId=t,this},e.prototype.setResourceUrl=function(t){return this.resourceUrl=t,this},e.prototype.setAtmosphereUrl=function(t){return this.atmosphereUrl=t,this},e.prototype.setHeightMap1Url=function(t){return this.heightMap1Url=t,this},e.prototype.setHeightMap2Url=function(t){return this.heightMap2Url=t,this},e}),define("production/Track",[],function(){var t=function(t){this.data=t,this.currentFrame=0};return t.prototype.getLength=function(){return this.data.length},t.prototype.setCurrentFrame=function(t){this.currentFrame=t},t.prototype.getFrameData=function(){var t=null,e=this.data.length;return e>0&&(t=e>this.currentFrame?this.data[this.currentFrame]:this.data[e-1]),t},t.prototype.setRecording=function(t){this.recording=t},t.prototype.setFrameData=function(t){var e=this.data.length;this.recording&&(e<this.currentFrame&&(e>0?this.pushFrameUntilCurrentIndex(this.data[e-1]):this.pushFrameUntilCurrentIndex(t)),this.data[this.currentFrame]=t)},t.prototype.pushFrameUntilCurrentIndex=function(t){for(var e=this.data.length;e<this.currentFrame;)this.data.push(t),e++},t}),define("production/Reel",[],function(){var t=function(){this.tracks=[],this.currentFrame=0};return t.prototype.getPosition=function(){return this.currentFrame},t.prototype.getLength=function(){var t=0;return this.tracks.forEach(function(e){var n=e.getLength();n>t&&(t=n)}),t},t.prototype.addTrack=function(t){this.tracks.push(t),t.setCurrentFrame(this.currentFrame)},t.prototype.skipTo=function(t){this.currentFrame=t,this.tracks.forEach(function(e){e.setCurrentFrame(t)})},t.prototype.nextFrame=function(){this.skipTo(this.currentFrame+1)},t}),define("ApplicationController",["production/Resources","controls/GamepadApi","production/ccp/res/ShipArchetype","production/ccp/res/PlanetArchetype","production/Track","production/Reel"],function(t,e,n,i,o,r){var a=function(t,e){var n={url:e};t.ships.push(n)},s=function(t,e,n,o,r,a){var s=new i;s.setItemId(e),s.setResourceUrl(n),s.setAtmosphereUrl(o),s.setHeightMap1Url(r),s.setHeightMap2Url(a),t.planets.push(s)},c=function(t,e,n){t.testName=n.test,t.record=function(){e.record()},t.pause=function(){e.stop()},t.play=function(){e.play()},t.loadShip=function(t){e.testCreateShip(t.url)},t.loadPlanet=function(t){e.testCreatePlanet(t)},t.ships=[],a(t,"res:/dx9/model/ship/amarr/battleship/ab3/ab3_t1.red"),a(t,"res:/dx9/model/ship/gallente/Cruiser/GC3/CreoDron/GC3_T2_CreoDron.red"),a(t,"res:/dx9/model/ship/amarr/at1/at1.red"),a(t,"res:/dx9/model/ship/jove/capsule/capsule.red"),t.planets=[],s(t,40000002,"res:/dx9/model/WorldObject/Planet/Template/Terrestrial/P_Terrestrial_61.red",void 0,"res:/dx9/model/worldobject/planet/Terrestrial/Terrestrial03_H.png","res:/dx9/model/worldobject/planet/Terrestrial/Terrestrial04_H.png"),s(t,40000100,"res:/dx9/model/WorldObject/Planet/Template/Gas/P_GasGiant_12.red",void 0,"res:/dx9/model/worldobject/planet/Gasgiant/GasGiant01_D.png","res:/dx9/model/worldobject/planet/Gasgiant/GasGiant03_D.png")},p=function(t,e,n,i){var o=this;this.productionManager=n,c(t,this,e),n.setResourcePath("res","//web.ccpgamescdn.com/ccpwgl/res/");var r=n.createSet(i,"res:/dx9/scene/universe/a01_cube.red");r.then(function(t){o.onSetCreated(t)},function(e){console.log("Init error: "+e),t.testName=e,t.$apply()})};p.prototype.testCreatePlanet=function(t){var e=this.set.getStage().enter(t),n=this.set.getSceneCamera();e.then(function(t){var e=t.getStateData(),i=n.getPosition();e.radius=5e3,n.rotateModelVectorByModelRotation(e.position,0,0,1*-e.radius),e.position[0]+=-1*i[0],e.position[1]+=-1*i[1],e.position[2]+=-1*i[2],t.setStateData(e)})},p.prototype.testCreateShip=function(e){var i=new n,r=this,a=this.set.getSceneCamera();i.setResourceUrl(e);var s=this.set.getStage().enter(i);this.animCommands=r.director.getCommandChannel("animator",t.CameraOperator.getActionNames()),s.then(function(t){var e=new o([]);r.stageManager.getAnimator(t,e);var n=t.getStateData(),i=t.getBoundingSphereRadius(),s=a.getPosition();10>i&&(i=10),a.rotateModelVectorByModelRotation(n.position,0,0,1.5*-i),n.position[0]+=-1*s[0],n.position[1]+=-1*s[1],n.position[2]+=-1*s[2],t.setStateData(n),r.reel.addTrack(e),r.selectedShipAnim&&r.selectedShipAnim.setCommandChannel(null)})},p.prototype.createDefaultBindings=function(){this.director.addBinding({actionName:"yawLeft"},{inputName:"RIGHT_STICK_X_NEG"}),this.director.addBinding({actionName:"yawRight"},{inputName:"RIGHT_STICK_X_POS"}),this.director.addBinding({actionName:"pitchUp"},{inputName:"RIGHT_STICK_Y_POS"}),this.director.addBinding({actionName:"pitchDown"},{inputName:"RIGHT_STICK_Y_NEG"}),this.director.addBinding({actionName:"rollClockwise"},{inputName:"LEFT_STICK_X_POS"}),this.director.addBinding({actionName:"rollCounter"},{inputName:"LEFT_STICK_X_NEG"}),this.director.addBinding({actionName:"moveForward"},{inputName:"RB"}),this.director.addBinding({actionName:"moveBackward"},{inputName:"LB"}),this.director.addBinding({actionName:"moveLeft"},{inputName:"X"}),this.director.addBinding({actionName:"moveRight"},{inputName:"B"}),this.director.addBinding({actionName:"moveUp"},{inputName:"Y"}),this.director.addBinding({actionName:"moveDown"},{inputName:"A"})},p.prototype.setupGamepadInput=function(){var t=this.director.getInputChannel("gamepad"),n={onGamepadDisconnected:function(){},onControlValueChanged:function(e,n){t.setIntensity(e,n)}},i=new e;i.addGamepadListener({onGamepadConnected:function(t){t.addListener(n)},onGamepadDisconnected:function(){}}),i.init()},p.prototype.onSetCreated=function(e){var n=this;this.set=e,this.director=new t.Director,this.reel=new r;var i=this.director.getCommandChannel("camera",t.CameraOperator.getActionNames());this.camera=new t.Camera(e.getSceneCamera()),this.cameraOperator=new t.CameraOperator(i,new o([])),this.camera.setOperator(this.cameraOperator),this.stageManager=new t.StageManager(e.getStage()),this.createDefaultBindings(),this.setupGamepadInput(),e.getSyncSource().setCallback(function(){n.stageManager.updateStage(),n.camera.updateFrame(),n.reel.nextFrame()})},p.prototype.record=function(){this.reel.skipTo(0);var t=this.selectedShipAnim.getScript();this.selectedShipAnim.setCommandChannel(this.animCommands),t.setRecording(!0)},p.prototype.stop=function(){this.reel.skipTo(0);var t=this.selectedShipAnim.getScript();this.selectedShipAnim.setCommandChannel(null),t.setRecording(!1)},p.prototype.play=function(){this.reel.skipTo(0);var t=this.selectedShipAnim.getScript();this.selectedShipAnim.setCommandChannel(null),t.setRecording(!1)};var u=function(t,e,n){return function(i){return new p(i,t,e,n)}};return{ApplicationController:p,create:u}}),define("production/ccp/SyncSource",[],function(){var t=60,e=function(t,e){this.ccpwgl=t,this.scene=e};return e.prototype.setCallback=function(t){this.ccpwgl.onPostRender=t},e.prototype.getRate=function(){return t},e}),define("production/ccp/Set",[],function(){var t=function(t){this.ccpwgl=t.ccpwgl,this.scene=t.scene,this.syncSource=t.syncSource,this.stage=t.stage,this.sceneCamera=t.sceneCamera,this.lightBoard=t.lightBoard};return t.prototype.getSyncSource=function(){return this.syncSource},t.prototype.getStage=function(){return this.stage},t.prototype.getSceneCamera=function(){return this.sceneCamera},t}),define("production/ccp/Stage",["lib/q"],function(t){var e=function(t,e){this.ccpwgl=t,this.scene=e};return e.prototype.enter=function(e){var n=t.defer();return e.request(this.ccpwgl,this.scene,n),n.promise},e}),define("production/ccp/SceneCamera",["lib/gl-matrix","util/GlHelper"],function(t,e){var n=function(){this.fov=60,this.nearPlane=1,this.farPlane=1e5,this.rotation=t.quat4.identity(),this.modelRotation=t.quat4.identity(),this.position=t.vec3.create(),this.viewOffset=t.vec3.create(),this.projection=t.mat4.create(),this.view=t.mat4.create(),this.updateView=this.calculateView};return n.prototype.nullFunction=function(){},n.prototype.calculateView=function(){t.mat4.fromRotationTranslation(this.rotation,this.viewOffset,this.view),t.mat4.translate(this.view,this.position),this.updateView=this.nullFunction},n.prototype.onViewChanged=function(){this.updateView=this.calculateView},n.prototype.getProjection=function(e){return t.mat4.perspective(this.fov,e,this.nearPlane,this.farPlane,this.projection),this.projection},n.prototype.getView=function(){return this.updateView(),this.view},n.prototype.update=function(){},n.prototype.getStateData=function(t){var e=t||{};return e.position=this.getPosition(e.position),e.rotation=this.getRotation(e.rotation),e.modelRotation=this.getModelRotation(e.modelRotation),e},n.prototype.setStateData=function(e){t.vec3.set(e.position,this.position),t.quat4.set(e.rotation,this.rotation),t.quat4.set(e.modelRotation,this.modelRotation),this.onViewChanged()},n.prototype.getPosition=function(e){return t.vec3.set(this.position,e||[0,0,0])},n.prototype.setPosition=function(e){t.vec3.set(e,this.position),this.onViewChanged()},n.prototype.getRotation=function(e){return t.quat4.set(this.rotation,e||[0,0,0,0])},n.prototype.setRotation=function(e){t.quat4.set(e,this.rotation),this.onViewChanged()},n.prototype.getModelRotation=function(e){return t.quat4.set(this.modelRotation,e||[0,0,0,0])},n.prototype.setModelRotation=function(e){t.quat4.set(e,this.modelRotation)},n.prototype.rotateModelVectorByModelRotation=function(t,n,i,o){return e.rotateVectorByView(t,this.modelRotation,n*e.MODEL_DIRECTION_RIGHT*e.VIEW_DIRECTION_RIGHT,i*e.MODEL_DIRECTION_UP*e.VIEW_DIRECTION_UP,o*e.MODEL_DIRECTION_FORWARD*e.VIEW_DIRECTION_FORWARD)},n}),define("production/ccp/LightBoard",[],function(){var t=function(t,e){this.ccpwgl=t,this.scene=e};return t}),define("production/ccp/ProductionManager",["lib/q","production/ccp/SyncSource","production/ccp/Set","production/ccp/Stage","production/ccp/SceneCamera","production/ccp/LightBoard"],function(t,e,n,i,o,r){var a={},s=function(t,a){var s={ccpwgl:t,scene:a,syncSource:new e(t,a),stage:new i(t,a),sceneCamera:new o,lightBoard:new r(t,a)};return t.setCamera(s.sceneCamera),new n(s)},c=function(e,n,i){var o=t.defer(),r=function(t){var n=s(e,t);o.resolve(n)};try{e.initialize(n,a),i(r)}catch(c){o.reject(c)}return o.promise},p=function(t){this.ccpwgl=t};return p.prototype.setResourcePath=function(t,e){this.ccpwgl.setResourcePath(t,e)},p.prototype.createSet=function(t,e){var n=this.ccpwgl;return c(n,t,function(t){var i=function(){t(this)};n.loadScene(e,i)})},p.prototype.createChromaKeyedSet=function(t,e){var n=this.ccpwgl;return c(n,t,function(t){var i=n.createScene(e);t(i)})},p}),define("ClientApp",["module","angular","lib/ccpwgl","ApplicationController","production/ccp/ProductionManager"],function(t,e,n,i,o){var r=t.config(),a=function(t){var a=e.module("ClientApp",[]),s=new o(n);return a.controller("ApplicationController",["$scope",i.create(r,s,t)]),[a.name]};return a});