define("TestController",[],function(){var t=function(t){return function(e){e.testName=t.test}};return{create:t}}),define("3d/ResourceManager",["lib/ccpwgl"],function(t){var e=function(e,i){return t.setResourcePath(e,i),this},i={setResourcePath:e};return i}),define("3d/Helper",["lib/gl-matrix"],function(t){var e=Math.PI/180,i={forward:1,upward:-1,rightward:-1},r={rollClockwise:1,pitchUp:-1,yawRight:1},a={forward:1,upward:1,rightward:-1},o={VIEW_DIRECTION_FORWARD:i.forward,VIEW_DIRECTION_UP:i.upward,VIEW_DIRECTION_RIGHT:i.rightward,VIEW_ROTATION_ROLL_CLOCKWISE:r.rollClockwise,VIEW_ROTATION_PITCH_UP:r.pitchUp,VIEW_ROTATION_YAW_RIGHT:r.yawRight,VIEW_VECTOR_FORWARD:t.vec3.create([0,0,i.forward]),VIEW_VECTOR_UP:t.vec3.create([0,i.upward,0]),VIEW_VECTOR_RIGHT:t.vec3.create([i.rightward,0,0]),MODEL_DIRECTION_FORWARD:a.forward,MODEL_DIRECTION_UP:a.upward,MODEL_DIRECTION_RIGHT:a.rightward,MODEL_VECTOR_FORWARD:t.vec3.create([0,0,a.forward]),MODEL_VECTOR_UP:t.vec3.create([0,a.upward,0]),MODEL_VECTOR_RIGHT:t.vec3.create([a.rightward,0,0]),degreeToRad:function(t){return t*e}};return o}),define("3d/SceneCamera",["lib/gl-matrix","3d/Helper"],function(t,e){var i=function(){function i(e){var i={rawValue:0,quat:t.quat4.identity(),vector:e};return i}this.fov=60,this.nearPlane=1,this.farPlane=1e5,this.pitch=i(e.VIEW_VECTOR_RIGHT),this.roll=i(e.VIEW_VECTOR_FORWARD),this.yaw=i(e.VIEW_VECTOR_UP),this.rotation=t.quat4.identity(),this.position=t.vec3.create(),this.viewOffset=t.vec3.create(),this.projection=t.mat4.create(),this.view=t.mat4.create(),this.updateView=this.calculateView};return i.prototype.nullFunction=function(){},i.prototype.calculateView=function(){t.quat4.identity(this.rotation),t.quat4.multiply(this.roll.quat,this.rotation,this.rotation),t.quat4.multiply(this.pitch.quat,this.rotation,this.rotation),t.quat4.multiply(this.yaw.quat,this.rotation,this.rotation),t.mat4.fromRotationTranslation(this.rotation,this.viewOffset,this.view),t.mat4.translate(this.view,this.position),this.updateView=this.nullFunction},i.prototype.onViewChanged=function(){this.updateView=this.calculateView},i.prototype.getProjection=function(e){return t.mat4.perspective(this.fov,e,this.nearPlane,this.farPlane,this.projection),this.projection},i.prototype.getView=function(){return this.updateView(),this.view},i.prototype.update=function(){},i.prototype.getStateData=function(t){var e=t||{};return e.position=this.getPosition(e.position),e.rotation||(e.rotation=[0,0,0]),e.rotation[0]=this.roll.rawValue,e.rotation[1]=this.pitch.rawValue,e.rotation[2]=this.yaw.rawValue,e},i.prototype.setStateData=function(t){this.setRoll(t.rotation[0]),this.setPitch(t.rotation[1]),this.setYaw(t.rotation[2]),this.setPosition(t.position)},i.prototype.getPosition=function(e){return t.vec3.set(this.position,e||[0,0,0])},i.prototype.setPosition=function(e){t.vec3.set(e,this.position),this.onViewChanged()},i.prototype.changeRotation=function(e,i){e.rawValue!==i&&(e.rawValue=i,t.quat4.fromAngleAxis(i,e.vector,e.quat),this.onViewChanged())},i.prototype.getPitch=function(){return this.pitch.rawValue},i.prototype.setPitch=function(t){this.changeRotation(this.pitch,t)},i.prototype.getRoll=function(){return this.roll.rawValue},i.prototype.setRoll=function(t){this.changeRotation(this.roll,t)},i.prototype.getYaw=function(){return this.yaw.rawValue},i.prototype.setYaw=function(t){this.changeRotation(this.yaw,t)},i}),define("3d/Scene",["lib/ccpwgl","3d/SceneCamera","lib/gl-matrix"],function(t,e){var i=function(){this.camera=new e,t.setCamera(this.camera)};return i.prototype.setBackgroundBox=function(e){this.scene=t.loadScene(e)},i.prototype.getCamera=function(){return this.camera},i.prototype.setPreRenderCallback=function(e){t.onPreRender=e},i}),define("3d/SceneProducer",["lib/ccpwgl","3d/ResourceManager","3d/Scene"],function(t,e,i){var r={},a=function(e){return t.initialize(e,r),new i},o=function(){return e},n={createScene:a,getResourceManager:o};return n}),define("StageManager",[],function(){var t=function(){};return t.prototype.updateStage=function(){},t}),define("Director",[],function(){var t=function(){};return t}),define("Camera",[],function(){var t={getCameraStateData:function(t){return t}},e=function(e){this.sceneCamera=e,this.operator=t,this.lastState=null};return e.getNullOperator=function(){return Object.create(t)},e.prototype.setOperator=function(e){this.operator=e||t},e.prototype.updateFrame=function(){var t=this.sceneCamera,e=t.getStateData(this.lastState),i=this.operator.getCameraStateData(e);t.setStateData(i),this.lastState=e},e}),define("Resources",["StageManager","Director","Camera"],function(t,e,i){var r={StageManager:t,Director:e,Camera:i};return r}),define("ClientApp",["module","angular","TestController","3d/SceneProducer","Resources"],function(t,e,i,r,a){var o=t.config(),n=function(t){var n=e.module("ClientApp",[]);n.controller("TestController",["$scope",i.create(o)]),r.getResourceManager().setResourcePath("res","//web.ccpgamescdn.com/ccpwgl/res/");var s=r.createScene(t);s.setBackgroundBox("res:/dx9/scene/universe/a01_cube.red");var c=s.scene.loadShip("res:/dx9/model/ship/amarr/battleship/ab3/ab3_t1.red",void 0);c.loadBoosters("res:/dx9/model/ship/booster/booster_amarr.red");var u=new a.Camera(s.getCamera());return new a.Director,this.scene.setPreRenderCallback(function(){u.updateFrame()}),[n.name]};return n});