extends layout

block content
  div(data-ng-controller="ApplicationController")
    span Status: {{status}}
    div(id="view")
      canvas(id="mainScreen")
    div(id="controls")
      button(ng-click="record()") Record 
      button(ng-click="pause()") Pause
      button(ng-click="play()") Play
    div(id="focusSelection")
      button(ng-click="setFocusOnCamera()") Focus Camera
    div(id="propCreation")
      select(ng-model="selectedProp", ng-options="prop as prop.resourceUrl for prop in props", size="5")
      button(ng-click="addProp(selectedProp)") Add Prop

  script(type="text/javascript", charset="utf-8", src="/javascripts/" + build + "/lib/gamepad.js")
  script(type="text/javascript", charset="utf-8", src="/javascripts/" + build + "/lib/gl-matrix.js")
  script(type="text/javascript", charset="utf-8", src="/javascripts/" + build + "/lib/ccpwgl_int.js")
  script(type="text/javascript", charset="utf-8", src="/javascripts/" + build + "/lib/ccpwgl.js")

  script(type="text/javascript", charset="utf-8", src="/javascripts/" + build + "/lib/require.js")

  script.
    require.config({
      baseUrl: "/javascripts/!{build}",
      paths: {
        "angular": "lib/angular",
        "ClientApp": "client/ClientApp"
      },
      shim: {
        "angular": {
          exports: "angular"
        },
        "lib/ccpwgl": {
          exports: "ccpwgl"
        },
        "lib/gamepad": {
          exports: "Gamepad"
        }
      },
      config: {
        "ClientApp": !{clientConfig}
      }
    });
    require(["angular", "ClientApp"], function(angular, app) {
      var mainScreen = document.getElementById("mainScreen");
      var appModuleNames = app(mainScreen);

      angular.bootstrap(document, appModuleNames);
    });
